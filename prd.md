# PRD: 마케팅 대행사 통합 관리 시스템

**문서 버전:** 1.0  
**작성일:** 2025-10-26  
**프로젝트명:** 마케팅 대행사 데이터 통합 관리 플랫폼

---

## 📋 목차
1. [프로젝트 개요](#프로젝트-개요)
2. [비즈니스 목표](#비즈니스-목표)
3. [현재 시스템 분석](#현재-시스템-분석)
4. [기능 요구사항](#기능-요구사항)
5. [기술 스택](#기술-스택)
6. [데이터 구조](#데이터-구조)
7. [API 명세](#api-명세)
8. [UI/UX 요구사항](#uiux-요구사항)
9. [개발 우선순위](#개발-우선순위)
10. [개발 단계별 계획](#개발-단계별-계획)

---

## 🎯 프로젝트 개요

### 배경
온라인 마케팅 대행사의 매출, 매입, 운영비 데이터가 다우오피스, 구글 시트 등 여러 곳에 분산되어 있어 통합 관리 및 실시간 분석이 어려운 상황입니다.

### 목적
- 모든 재무 데이터를 하나의 플랫폼에서 입력, 관리, 분석
- 실시간 대시보드를 통한 의사결정 지원
- 부서별/영업사원별 성과 가시화
- 모바일 환경에서도 쉽게 데이터 입력 가능

### 솔루션
Next.js 기반 웹 애플리케이션을 구축하고, Google Sheets API를 통해 데이터를 저장/조회하는 풀스택 시스템 개발

---

## 💼 비즈니스 목표

### 단기 목표 (1개월)
- 매출/매입/운영비 입력 시스템 구축
- 기본 대시보드 완성
- 11월부터 실제 데이터 입력 시작

### 중기 목표 (3개월)
- 부서별/영업사원별 성과 분석
- 수익성 분석 대시보드
- 월별 자동 리포트 생성

### 장기 목표 (6개월)
- 예측 분석 기능
- 알림/자동화 시스템
- 모바일 앱 출시

---

## 🔍 현재 시스템 분석

### 기존 매출 입력 시스템 (구글 폼 → 구글 시트)

**구글 시트 구조:**
```
열 구조:
- A열: 타임스탬프 (자동)
- B열: 부서 (내근직/영업부)
- C열: 입력자 (이름)
- D열: 연장 (신규/연장/기존고객 소개)
- E열: 광고주 업체명
- F열: 마케팅 매체 상품명
- G열: 계약 개월 수
```

**상품 종류:**
- 트털 관리
- 브랜드 블로그 마케팅
- 퍼포먼스 마케팅
- 배달앱 관리
- 맛글만
- 손수체험관리

**부서:**
- 영업부 (4명)
- 내무부 (15명)
  - 토탈마케팅
  - 배달앱운영대행팀
  - 디자인팀
  - 체험단관리팀
  - 브랜드블로그운영팀
  - 영상편집팀
  - 영상촬영팀
  - 당근앱관리팀
  - 퍼포먼스팀

### 추가 필요 데이터
- 매입 데이터 (광고비, 외주비)
- 운영비 데이터 (관리비, 식비 등)
- 인력 데이터 (급여, 부서 배치)
- 광고주 상세 정보

---

## ⚙️ 기능 요구사항

### 1. 사용자 인증 및 권한 관리

#### 1.1 로그인 시스템
- 이메일/비밀번호 기반 로그인
- Google OAuth 로그인 (선택)
- 세션 관리

#### 1.2 권한 레벨
```
- ADMIN (관리자): 모든 기능 접근
- EXECUTIVE (임원): 수익성 분석 포함 모든 대시보드 접근
- MANAGER (팀장): 자기 팀 데이터 + 전체 대시보드 접근
- STAFF (직원): 데이터 입력 + 제한된 대시보드 접근
- SALES (영업): 매출 입력 + 영업 대시보드 접근
```

### 2. 매출 관리

#### 2.1 매출 입력
**입력 필드:**
- 날짜 (자동, 수정 가능)
- 부서 (드롭다운)
- 입력자 (자동)
- 계약 구분 (신규/연장/기존고객 소개)
- 광고주명 (자동완성 지원)
- 상품명 (드롭다운)
- 계약 개월 수
- 월 계약금액 (추가 필요)
- 총 계약금액 (자동 계산)
- 영업담당자 (드롭다운)
- 비고

**기능:**
- 실시간 유효성 검사
- 중복 체크
- 자동 저장 (Draft)
- 일괄 입력 (CSV 업로드)

#### 2.2 매출 조회/수정
- 날짜 범위 필터
- 부서별 필터
- 광고주별 필터
- 영업사원별 필터
- 검색 기능
- 정렬 기능
- 엑셀 내보내기

### 3. 매입 관리

#### 3.1 매입 입력
**입력 필드:**
- 날짜
- 광고주명 (매출 데이터와 연동)
- 매입 구분 (드롭다운)
  - 네이버 광고
  - 메타(페이스북/인스타) 광고
  - 구글 광고
  - 카카오 광고
  - 디자인 외주
  - 영상 외주
  - 글작성 외주
  - 기타
- 매입액
- 담당부서 (자동)
- 담당AE (자동)
- 비고

**기능:**
- 광고주 선택 시 관련 정보 자동 입력
- 영수증/계산서 이미지 업로드
- 정산 상태 체크

### 4. 운영비 관리

#### 4.1 운영비 입력
**입력 필드:**
- 날짜
- 지출 항목 (드롭다운)
  - 사무실 관리비
  - 식비
  - 교통비
  - 통신비
  - 소모품비
  - 교육비
  - 복리후생비
  - 기타
- 금액
- 부서 귀속 (전사공통/특정부서)
- 결제 방법 (법인카드/현금/계좌이체)
- 작성자
- 비고

**기능:**
- 반복 지출 자동 입력 (월세, 통신비 등)
- 영수증 이미지 업로드
- 부서별 비용 분배

### 5. 광고주 관리

#### 5.1 광고주 등록/수정
**입력 필드:**
- 광고주명
- 업종
- 담당부서
- 담당AE
- 계약시작일
- 계약종료일
- 상태 (진행중/종료/보류)
- 영업담당자
- 연락처
- 이메일
- 주소
- 특이사항

**기능:**
- 계약 히스토리 관리
- 계약 만료 알림
- 연장 관리

### 6. 인력 관리

#### 6.1 직원 정보 관리 (관리자 전용)
**입력 필드:**
- 이름
- 부서
- 직급 (AE/팀원/팀장/임원)
- 입사일
- 퇴사일
- 월급여
- 연락처
- 이메일

### 7. 대시보드 (일반)

#### 7.1 전체 현황
- 월/분기/연도 목표 대비 달성률
- 실시간 매출 집계
- 부서별 매출 순위
- 영업사원별 실적
- 광고주 현황 (총/신규/종료/연장)
- 연장률

#### 7.2 부서별 대시보드
- 부서 매출 추이 (그래프)
- 담당 광고주 수
- 1인당 매출액
- 월별 비교

#### 7.3 영업 대시보드
- 영업사원별 실적 랭킹
- 신규 광고주 현황
- 계약 파이프라인
- 목표 달성률

### 8. 임원 대시보드 (수익성 분석)

#### 8.1 부서별 수익성
- 매출
- 매입 (직접비)
- 인건비
- 운영비 (간접비)
- 순이익
- 수익률
- 상태 (정상/저수익/적자)

#### 8.2 광고주별 수익성
- 광고주별 수익률 랭킹
- 적자 광고주 목록
- 위험 광고주 (수익률 10% 미만)

#### 8.3 전사 수익 분석
- 총 매출/매입/인건비/운영비
- 월별 순이익 추이
- 손익분기점 분석
- 예상 손익 (현재 진행 기준)

### 9. 리포트 생성

#### 9.1 자동 리포트
- 월간 실적 리포트
- 부서별 성과 리포트
- 영업 실적 리포트

#### 9.2 커스텀 리포트
- 기간 선택
- 항목 선택
- PDF/엑셀 다운로드

### 10. 알림 시스템 (선택)

- 목표 달성 알림
- 계약 만료 예정 알림
- 적자 발생 알림
- 데이터 입력 리마인더

---

## 🛠️ 기술 스택

### Frontend
```
- Framework: Next.js 14 (App Router)
- Language: TypeScript
- Styling: Tailwind CSS
- UI Library: shadcn/ui
- Charts: Recharts / Chart.js
- State Management: React Query + Zustand
- Form Handling: React Hook Form + Zod
- Date Handling: date-fns
```

### Backend
```
- Runtime: Next.js API Routes
- Language: TypeScript
- Database: Google Sheets API (초기)
- Authentication: NextAuth.js
- Validation: Zod
```

### External Services
```
- Google Sheets API (데이터 저장소)
- Google Drive API (파일 업로드)
- Vercel (배포)
```

### Development Tools
```
- Package Manager: pnpm
- Linting: ESLint
- Formatting: Prettier
- Git: GitHub
- IDE: Cursor / VS Code
```

---

## 📊 데이터 구조

### Google Sheets 구조

#### Sheet 1: 매출 (Sales)
```
| A           | B      | C        | D          | E            | F          | G          | H          | I            | J          |
|-------------|--------|----------|------------|--------------|------------|------------|------------|--------------|------------|
| 타임스탬프   | 부서   | 입력자   | 계약구분   | 광고주명     | 상품명     | 계약개월   | 월계약금액 | 총계약금액   | 영업담당   |
| 2025-10-26  | 영업부 | 조이라   | 신규       | 미후테이    | 트털관리   | 12         | 3000000    | 36000000     | 박영업     |
```

#### Sheet 2: 매입 (Purchase)
```
| A           | B          | C          | D        | E        | F         | G      |
|-------------|------------|------------|----------|----------|-----------|--------|
| 날짜        | 광고주명   | 매입구분   | 매입액   | 담당부서 | 담당AE    | 비고   |
| 2025-10-26  | 미후테이   | 네이버광고 | 2500000  | 트털관리 | 김철수    | -      |
```

#### Sheet 3: 운영비 (Expenses)
```
| A           | B            | C        | D          | E          | F        | G      |
|-------------|--------------|----------|------------|------------|----------|--------|
| 날짜        | 지출항목     | 금액     | 부서귀속   | 결제방법   | 작성자   | 비고   |
| 2025-10-26  | 사무실관리비 | 5000000  | 전사공통   | 계좌이체   | 관리자   | 월세   |
```

#### Sheet 4: 광고주 (Clients)
```
| A          | B      | C          | D        | E            | F            | G        | H          | I      |
|------------|--------|------------|----------|--------------|--------------|----------|------------|--------|
| 광고주명   | 업종   | 담당부서   | 담당AE   | 계약시작일   | 계약종료일   | 상태     | 영업담당   | 비고   |
| 미후테이   | 식당   | 트털관리   | 김철수   | 2025-10-26   | 2026-10-25   | 진행중   | 박영업     | -      |
```

#### Sheet 5: 인력 (Staff)
```
| A      | B        | C      | D          | E        | F        | G      |
|--------|----------|--------|------------|----------|----------|--------|
| 이름   | 부서     | 직급   | 입사일     | 월급여   | 상태     | 비고   |
| 김철수 | 트털관리 | AE     | 2024-03-01 | 3500000  | 재직중   | -      |
```

#### Sheet 6: 설정 (Settings)
```
부서 목록, 상품 목록, 지출 항목 등 드롭다운용 데이터
```

---

## 🔌 API 명세

### Authentication APIs

#### POST /api/auth/login
```typescript
Request:
{
  email: string;
  password: string;
}

Response:
{
  user: {
    id: string;
    name: string;
    email: string;
    role: 'ADMIN' | 'EXECUTIVE' | 'MANAGER' | 'STAFF' | 'SALES';
    department: string;
  };
  token: string;
}
```

### Sales APIs

#### GET /api/sales
```typescript
Query Parameters:
- startDate?: string
- endDate?: string
- department?: string
- client?: string
- salesPerson?: string
- page?: number
- limit?: number

Response:
{
  data: Sale[];
  total: number;
  page: number;
  limit: number;
}
```

#### POST /api/sales
```typescript
Request:
{
  date: string;
  department: string;
  contractType: 'new' | 'renewal' | 'referral';
  clientName: string;
  productName: string;
  contractMonths: number;
  monthlyAmount: number;
  salesPerson: string;
  note?: string;
}

Response:
{
  success: boolean;
  id: string;
  message: string;
}
```

#### PUT /api/sales/[id]
수정

#### DELETE /api/sales/[id]
삭제

### Purchase APIs

#### GET /api/purchase
조회

#### POST /api/purchase
등록

### Expenses APIs

#### GET /api/expenses
조회

#### POST /api/expenses
등록

### Clients APIs

#### GET /api/clients
전체 광고주 목록

#### GET /api/clients/[id]
특정 광고주 상세

#### POST /api/clients
신규 광고주 등록

#### PUT /api/clients/[id]
광고주 정보 수정

### Dashboard APIs

#### GET /api/dashboard/overview
```typescript
Query Parameters:
- month: string (YYYY-MM)

Response:
{
  monthlyGoal: number;
  monthlySales: number;
  monthlyRate: number;
  quarterGoal: number;
  quarterSales: number;
  quarterRate: number;
  yearGoal: number;
  yearSales: number;
  yearRate: number;
}
```

#### GET /api/dashboard/departments
부서별 실적

#### GET /api/dashboard/sales-persons
영업사원별 실적

#### GET /api/dashboard/clients-status
광고주 현황 (신규/종료/연장)

### Executive Dashboard APIs

#### GET /api/executive/profitability
```typescript
Response:
{
  departments: Array<{
    name: string;
    sales: number;
    purchase: number;
    labor: number;
    expenses: number;
    profit: number;
    profitRate: number;
    status: 'good' | 'warning' | 'danger';
  }>;
  overall: {
    totalSales: number;
    totalPurchase: number;
    totalLabor: number;
    totalExpenses: number;
    totalProfit: number;
    profitRate: number;
  };
}
```

### Settings APIs

#### GET /api/settings/departments
부서 목록

#### GET /api/settings/products
상품 목록

#### GET /api/settings/expense-categories
지출 항목 목록

---

## 🎨 UI/UX 요구사항

### 디자인 원칙
- **Simple & Clean**: 과도한 장식 없이 깔끔한 디자인
- **Mobile First**: 모바일 우선 반응형 디자인
- **Fast Input**: 최소 클릭으로 빠른 입력
- **Clear Feedback**: 명확한 피드백 (성공/오류)
- **Accessible**: 접근성 고려 (키보드 네비게이션 등)

### 색상 체계
```
Primary: Blue (#3B82F6)
Success: Green (#10B981)
Warning: Yellow (#F59E0B)
Danger: Red (#EF4444)
Neutral: Gray (#6B7280)
```

### 레이아웃

#### 데스크톱 (1280px+)
```
┌─────────────────────────────────────┐
│ Header (로고, 네비게이션, 프로필)    │
├─────────────────────────────────────┤
│ ┌────┐ ┌──────────────────────────┐ │
│ │    │ │                          │ │
│ │ 사 │ │                          │ │
│ │ 이 │ │    Main Content          │ │
│ │ 드 │ │                          │ │
│ │ 바 │ │                          │ │
│ │    │ │                          │ │
│ └────┘ └──────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 모바일 (< 768px)
```
┌─────────────┐
│ Header      │
├─────────────┤
│             │
│   Content   │
│             │
├─────────────┤
│ Bottom Nav  │
└─────────────┘
```

### 주요 화면

#### 1. 로그인 화면
- 중앙 정렬 로그인 폼
- 로고 + 타이틀
- 이메일/비밀번호 입력
- 로그인 버튼

#### 2. 메인 대시보드
- 상단: 주요 지표 카드 (매출, 목표달성률 등)
- 중단: 차트 (부서별 매출, 추이)
- 하단: 최근 데이터 테이블

#### 3. 데이터 입력 화면
- 상단: 제목
- 중단: 입력 폼 (세로 스크롤)
- 하단: 제출/취소 버튼
- 우측: 최근 입력 내역 (선택)

#### 4. 데이터 목록 화면
- 상단: 검색/필터
- 중단: 테이블 (정렬, 페이지네이션)
- 우측: 상세 정보 패널 (선택시)

### 주요 컴포넌트

#### 네비게이션 메뉴
```
대시보드
├─ 전체 현황
├─ 부서별
└─ 영업

데이터 입력
├─ 매출 입력
├─ 매입 입력
└─ 운영비 입력

데이터 관리
├─ 매출 조회
├─ 매입 조회
├─ 운영비 조회
└─ 광고주 관리

임원 메뉴 (권한자만)
├─ 수익성 분석
└─ 리포트

설정
└─ 내 정보
```

#### 입력 폼 공통 요소
- 자동완성 지원 입력 필드
- 드롭다운 (Select)
- 날짜 선택기 (Date Picker)
- 숫자 입력 (천단위 콤마 자동)
- 텍스트 영역 (비고)
- 이미지 업로드 (영수증 등)

#### 대시보드 카드
- 아이콘 + 레이블 + 숫자
- 전월 대비 증감 표시 (▲▼)
- 클릭시 상세 보기

#### 차트
- 막대 차트 (부서별 비교)
- 라인 차트 (추이)
- 도넛 차트 (비율)
- 툴팁 상세 정보

---

## 🎯 개발 우선순위

### P0 (필수 - MVP)
1. ✅ 사용자 인증 (로그인/로그아웃)
2. ✅ Google Sheets API 연동
3. ✅ 매출 입력 기능
4. ✅ 기본 대시보드 (매출 집계)
5. ✅ 반응형 레이아웃

### P1 (중요 - 1차 배포)
1. ✅ 매입 입력 기능
2. ✅ 운영비 입력 기능
3. ✅ 광고주 관리
4. ✅ 부서별/영업별 대시보드
5. ✅ 데이터 조회/수정/삭제

### P2 (유용 - 2차 업데이트)
1. ✅ 임원 수익성 대시보드
2. ✅ 권한 관리 시스템
3. ✅ 인력 관리
4. ✅ 엑셀/CSV 내보내기
5. ✅ 검색/필터 고도화

### P3 (선택 - 3차 업데이트)
1. ⏳ 리포트 자동 생성
2. ⏳ 알림 시스템
3. ⏳ 이미지 업로드
4. ⏳ 예측 분석
5. ⏳ 모바일 PWA

---

## 📅 개발 단계별 계획

### Phase 1: 프로젝트 세팅 (2-3시간)
```
✅ Next.js 프로젝트 초기화
✅ 필수 패키지 설치
✅ 폴더 구조 설정
✅ Tailwind 설정
✅ Google Sheets API 세팅
✅ 환경 변수 설정
```

**디렉토리 구조:**
```
/app
  /(auth)
    /login
  /(dashboard)
    /page.tsx              # 메인 대시보드
    /sales
      /new/page.tsx        # 매출 입력
      /page.tsx            # 매출 조회
    /purchase
    /expenses
    /clients
    /executive
  /api
    /auth
    /sales
    /purchase
    /expenses
    /clients
    /dashboard
/components
  /ui                      # shadcn/ui 컴포넌트
  /forms                   # 폼 컴포넌트
  /charts                  # 차트 컴포넌트
  /layout                  # 레이아웃 컴포넌트
/lib
  /google-sheets.ts        # Google Sheets 유틸
  /utils.ts
  /validations.ts
/types
  /index.ts
```

### Phase 2: 인증 시스템 (3-4시간)
```
✅ NextAuth.js 설정
✅ 로그인 페이지
✅ 세션 관리
✅ 권한 미들웨어
✅ 로그아웃
```

### Phase 3: 매출 기능 (4-6시간)
```
✅ Google Sheets 연동 (매출 시트)
✅ 매출 입력 폼
✅ 매출 목록 조회
✅ 매출 수정/삭제
✅ 유효성 검사
```

### Phase 4: 기본 대시보드 (4-6시간)
```
✅ 메인 대시보드 레이아웃
✅ 매출 집계 API
✅ 주요 지표 카드
✅ 부서별 차트
✅ 최근 데이터 테이블
```

### Phase 5: 매입/운영비 기능 (4-6시간)
```
✅ 매입 입력/조회
✅ 운영비 입력/조회
✅ 광고주 자동완성
✅ 부서 자동 입력
```

### Phase 6: 고급 대시보드 (6-8시간)
```
✅ 영업 대시보드
✅ 부서별 상세 대시보드
✅ 필터/검색 기능
✅ 임원 수익성 분석
```

### Phase 7: 광고주/인력 관리 (3-4시간)
```
✅ 광고주 CRUD
✅ 인력 관리 (관리자)
✅ 계약 만료 알림
```

### Phase 8: 최적화 및 배포 (3-4시간)
```
✅ 성능 최적화
✅ 에러 핸들링
✅ 로딩 상태
✅ Vercel 배포
✅ 환경 설정
✅ 도메인 연결
```

**총 예상 시간: 30-40시간 (4-5일)**

---

## 🔒 보안 고려사항

### 데이터 보안
- 환경 변수로 API 키 관리
- Google Service Account 사용
- Row-level 권한 체크

### 인증/권한
- 비밀번호 해싱 (bcrypt)
- JWT 토큰 사용
- CSRF 방어
- Rate limiting

### API 보안
- API 엔드포인트 권한 체크
- 입력 검증 (Zod)
- SQL Injection 방어 (Google Sheets이므로 해당 없음)

---

## 📈 성능 요구사항

### 응답 시간
- 페이지 로드: < 2초
- API 응답: < 1초
- 검색/필터: < 500ms

### 동시 사용자
- 초기: 20명 (전 직원)
- 최대: 50명

### 데이터 볼륨
- 월 입력 건수: 약 500-1000건
- 연 데이터: 약 6,000-12,000건

---

## 🧪 테스트 계획

### 단위 테스트
- API 함수
- 유틸리티 함수
- 검증 스키마

### 통합 테스트
- API 엔드포인트
- Google Sheets 연동

### E2E 테스트
- 주요 사용자 플로우
  - 로그인
  - 매출 입력
  - 대시보드 조회

### 사용자 테스트
- 실제 직원들과 베타 테스트
- 피드백 수집 및 개선

---

## 📚 향후 확장 계획

### 단기 (3개월)
- 모바일 PWA
- 푸시 알림
- 자동 리포트 이메일

### 중기 (6개월)
- 예측 분석
- 머신러닝 기반 추천
- 슬랙/카톡 봇 연동

### 장기 (1년)
- PostgreSQL/Supabase로 마이그레이션
- 더 복잡한 분석 기능
- 다국어 지원

---

## 📞 문의 및 지원

**개발자:** Claude  
**프로젝트 시작일:** 2025-10-26  
**목표 1차 배포일:** 2025-11-10

---

## ✅ 체크리스트

### 개발 시작 전
- [ ] Google Sheets API 키 발급
- [ ] Google Service Account 생성
- [ ] Vercel 계정 준비
- [ ] GitHub 저장소 생성
- [ ] 디자인 시스템 확정

### 개발 완료 후
- [ ] 전체 기능 테스트
- [ ] 실제 데이터 테스트
- [ ] 직원 교육 자료 준비
- [ ] 배포 및 DNS 설정
- [ ] 백업 시스템 구축

---

## 🎉 성공 지표

### 기술적 지표
- ✅ 99% 이상 업타임
- ✅ 평균 페이지 로드 < 2초
- ✅ 0 크리티컬 버그

### 비즈니스 지표
- ✅ 데이터 입력 시간 50% 단축
- ✅ 전 직원 사용률 90% 이상
- ✅ 의사결정 속도 향상
- ✅ 수익성 가시화를 통한 실제 수익 개선

---

**문서 끝**